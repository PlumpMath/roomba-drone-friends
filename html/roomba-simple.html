<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
<title>src/roomba_drone_friends/roomba-simple.clj</title>
<link rel="stylesheet" type="text/css" href="highlight.css">
</head>
<body class="hl">
<pre class="hl"><span class="hl sym">(</span>ns roomba-drone-friends.roomba-simple
  <span class="hl sym">(:</span><span class="hl kde">import</span> roombacomm.RoombaCommSerial<span class="hl sym">))</span>

<span class="hl sym">(</span><span class="hl kwf">println</span> <span class="hl sym">(</span>System/getProperty <span class="hl str">&quot;java.class.path&quot;</span><span class="hl sym">))</span>
<span class="hl sym">(</span><span class="hl kwf">println</span> <span class="hl sym">(</span>System/getProperty <span class="hl str">&quot;java.library.path&quot;</span><span class="hl sym">))</span>

<span class="hl sym">(</span><span class="hl kwa">def</span> roomba <span class="hl sym">(</span>RoombaCommSerial. <span class="hl sym">))</span>

<span class="hl slc">;;Find your port for your Roomba</span>
<span class="hl sym">(</span><span class="hl kwd">map</span> <span class="hl kwf">println</span> <span class="hl sym">(</span>.listPorts roomba<span class="hl sym">))</span>
<span class="hl sym">(</span><span class="hl kwa">def</span> portname <span class="hl str">&quot;/dev/cu.FireFly-943A-SPP&quot;</span><span class="hl sym">)</span>
<span class="hl sym">(</span>.connect roomba portname<span class="hl sym">)</span>
<span class="hl sym">(</span>.startup roomba<span class="hl sym">)</span>  <span class="hl slc">;;puts Roomba in safe Mode</span>
<span class="hl slc">;; What mode is Roomba in?</span>
<span class="hl sym">(</span>.modeAsString roomba<span class="hl sym">)</span>
<span class="hl sym">(</span>.control roomba<span class="hl sym">)</span>
<span class="hl sym">(</span>.updateSensors roomba<span class="hl sym">)</span> <span class="hl slc">; returns true if you are connected</span>


<span class="hl sym">(</span>.pause roomba <span class="hl num">30</span><span class="hl sym">)</span>
<span class="hl sym">(</span>.playNote roomba <span class="hl num">72 40</span><span class="hl sym">)</span>
<span class="hl sym">(</span>.playNote roomba <span class="hl num">79 40</span><span class="hl sym">)</span>
<span class="hl sym">(</span>.spinLeft roomba<span class="hl sym">)</span>
<span class="hl sym">(</span>.spinRight roomba<span class="hl sym">)</span>
<span class="hl sym">(</span>.goBackward roomba<span class="hl sym">)</span>
<span class="hl sym">(</span>.goForward roomba<span class="hl sym">)</span>
<span class="hl sym">(</span>.turnLeft roomba<span class="hl sym">)</span>
<span class="hl sym">(</span>.turnRight roomba<span class="hl sym">)</span>

<span class="hl sym">(</span>.stop roomba<span class="hl sym">)</span>
<span class="hl sym">(</span>.reset roomba<span class="hl sym">)</span>
<span class="hl sym">(</span>.vacuum roomba true<span class="hl sym">)</span>
<span class="hl sym">(</span>.vacuum roomba false<span class="hl sym">)</span>
<span class="hl sym">(</span>.clean roomba<span class="hl sym">)</span>

<span class="hl slc">;; Get the sensor data</span>
<span class="hl sym">(</span>.updateSensors roomba<span class="hl sym">)</span> 
<span class="hl sym">(</span>.bumpLeft roomba<span class="hl sym">)</span>
<span class="hl sym">(</span>.bumpRight roomba<span class="hl sym">)</span>
<span class="hl sym">(</span>.wheelDropLeft roomba<span class="hl sym">)</span>
<span class="hl sym">(</span>.wheelDropRight roomba<span class="hl sym">)</span>
<span class="hl sym">(</span>.wheelDropCenter roomba<span class="hl sym">)</span>
<span class="hl sym">(</span>.sensorsAsString roomba<span class="hl sym">)</span>


<span class="hl sym">(</span><span class="hl kwa">defn</span> bark <span class="hl sym">[</span>r<span class="hl sym">]</span>
  <span class="hl sym">(</span><span class="hl kwf">doto</span> r
    <span class="hl sym">(</span>.vacuum true<span class="hl sym">)</span>
    <span class="hl sym">(</span>.playNote <span class="hl num">50 5</span><span class="hl sym">)</span>
    <span class="hl sym">(</span>.pause <span class="hl num">150</span><span class="hl sym">)</span>
    <span class="hl sym">(</span>.vacuum false<span class="hl sym">)))</span>

<span class="hl sym">(</span>bark roomba<span class="hl sym">)</span>

<span class="hl sym">(</span>.disconnect roomba<span class="hl sym">)</span>
</pre>
</body>
</html>
<!--HTML generated by highlight 2.16, http://www.andre-simon.de/-->
